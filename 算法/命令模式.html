<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>命令模式</title>
</head>
<body>
    <button id="button1">点击按钮1</button>
    <button id="button2">点击按钮2</button>
    <button id="button3">点击按钮3</button>
    <script>
        // 什么是命令模式，有没有通用模式？ 命令模式是简单问题复杂化的模式
        // 命令模式是若干命令构成，可以调度、执行取消命令。
        // 将请求封装成对象，分离命令接受者和发起者之间的耦合。 
        // 希望用一种松耦合的方式设计程序，使得请求发送者和请求接受者能够消除彼此之间的耦合关系
        // 这里面有三种角色: 命令本身、耦合者、执行者、接受者
        // 接收者
        const button1 = document.getElementById('button1')
        const button2 = document.getElementById('button2')
        const button3 = document.getElementById('button3')
        // 命令本身
        const menu1 = {
            refresh(){
                console.log('重新刷新')
            }
        }

        const menu2 = {
            refresh(){
                console.log('重新刷新')
            }
        }

        const menu3 = {
            refresh(){
                console.log('重新刷新')
            }
        }
       // 执行者
       var menu1Commond = function(receiver){
            this.receiver = receiver
       }  
       menu1Commond.prototype.execute = function(){
          this.receiver.refresh()
       }

       var menu2Commond = function(receiver){
            this.receiver = receiver
        }
        menu2Commond.prototype.execute = function(){
          this.receiver.refresh()
       }
        var menu3Commond = function(receiver){
            this.receiver = receiver
        }
        menu3Commond.prototype.execute = function(){
          this.receiver.refresh()
       }
       // 耦合者
       var setCommand = function(button, command){
        button.onclick = function(){
            command.execute()
        }
       }

       // 耦合起来
       setCommand(button1, new menu1Commond(menu1))
       setCommand(button2, new menu2Commond(menu2))
       setCommand(button3, new menu3Commond(menu3))
    </script>
</body>
</html>